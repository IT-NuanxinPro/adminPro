import{a as F,g as H,d as P,o as T,c as U,p as q,b as G,e as K,_ as V}from"./index-CZU479GO.js";var I={exports:{}};(function(u,k){(function(m,g){u.exports=g()})(F,function(){var m=function(t){var o=t.txt,n=o===void 0?new Date().toLocaleDateString()+" Top secret":o,e=t.x,s=e===void 0?0:e,r=t.y,h=r===void 0?50:r,d=t.font,c=d===void 0?"microsoft yahe":d,a=t.color,l=a===void 0?"#000":a,i=t.fontSize,p=i===void 0?12:i,O=t.alpha,R=O===void 0?.1:O,E=t.width,B=E===void 0?158:E,_=t.height,j=_===void 0?100:_,S=t.angle,W=S===void 0?-15:S;this.txt=n,this.width=B,this.height=j,this.x=s,this.y=h,this.font=c,this.fontSize=p,this.color=l,this.alpha=R,this.angle=W},g=(x.prototype.render=function(){var t=this.watermark,o=t.txt,n=t.x,e=t.y,s=t.width,r=t.height,h=t.font,d=t.color,c=t.fontSize,a=t.alpha,l=t.angle,i=this.canvas.getContext("2d");if(i===null)throw new Error("getContext error");return i.clearRect(0,0,s,r),i.textBaseline="top",i.textAlign="left",i.fillStyle=d,i.globalAlpha=a,i.font=c+"px "+h,i.translate(n,e),i.rotate(Math.PI/180*l),i.translate(-n,-e-c),i.fillText(o,n,e+c),this.canvas.toDataURL()},x);function x(t){var o=(this.watermark=t).width,n=t.height;this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width",""+o),this.canvas.setAttribute("height",""+n)}function f(t,o,n){return Object.keys(o).forEach(function(e){if(n!=="normal")if(t.style.setProperty)t.style.setProperty(e,o[e],"important");else if(t.setAttribute){var s="";t.getAttribute("style")!==null&&(s=s+" "+e+": "+o[e]+"!important"),t.setAttribute("style",s)}else t.style[e]=o[e];else t.style[e]=o[e]}),t}var z=(w.prototype._createItem=function(){var t=this.watermark,o=t.txt,n=t.x,e=t.y,s=t.font,r=t.color,h=t.fontSize,d=t.alpha,c=t.angle,a=t.width,l=t.height,i=document.createElement("div");f(i,{position:"relative",width:a,height:l,flex:"0 0 "+a+"px",overflow:"hidden",pointerEvents:"none"},"normal");var p=document.createElement("span");return p.innerHTML=o,f(p,{position:"absolute",top:e+"px",left:n+"px",fontFamily:s,fontSize:h+"px",color:r,lineHeight:1.5,opacity:d,fontWeight:400,transform:"rotate("+c+"deg)",transformOrigin:"0 0",userSelect:"none",whiteSpace:"nowrap",overflow:"hidden"},"normal"),i.appendChild(p),i},w.prototype.render=function(){var t=0,o=this.watermark,n=o.width,e=o.height,s=document.documentElement||document.body,r=s.clientWidth,h=s.clientHeight,d=Math.ceil(r/n),c=Math.ceil(h/e),a=document.createElement("div");for(f(a,{display:"flex",flexWrap:"wrap",width:n*d+"px",height:e*c+"px"},"normal");t<d*c;t++)a.appendChild(this._createItem());return a},w);function w(t){this.watermark=t}var C=(b.prototype.render=function(){var t=this.watermark,o=t.txt,n=t.x,e=t.y,s=t.width,r=t.height,h=t.color,d=t.font,c=t.fontSize,a='<svg xmlns="http://www.w3.org/2000/svg" width="'+s+'px" height="'+r+`px">
                <text x="`+n+'px" y="'+e+'px" dy="'+c+`px"
                    text-anchor="start"
                    stroke="`+h+`"
                    stroke-opacity="`+t.alpha+`"
                    fill="none"
                    transform="rotate(`+t.angle+","+n+" "+e+`)"
                    font-weight="100"
                    font-size="`+c+`"
                    font-family="`+d+`"
                    >
                    `+o+`
                </text>
            </svg>`;return"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(a)))},b);function b(t){this.watermark=t}var y=MutationObserver||WebKitMutationObserver||MozMutationObserver;function L(t,o,n){if(!y)return e=t,s=o,r=n,(h=["DOMAttrModified","DOMAttributeNameChanged","DOMCharacterDataModified","DOMElementNameChanged","DOMNodeInserted","DOMNodeInsertedIntoDocument","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMSubtreeModified"]).map(function(a){return e.addEventListener(a,function(){return r()},!1)}),document.body.addEventListener("DOMSubtreeModified",function(){return r()},!1),{containerObserver:{disconnect:function(){return s.removeEventListener("DOMSubtreeModified",function(){return r()},!1)}},targetObserver:{disconnect:function(){return h.map(function(a){return e.removeEventListener(a,function(){return r()},!1)})}}};var e,s,r,h,d=new y(function(a){a.forEach(function(l){l.removedNodes.forEach(function(i){i===t&&n()})})});d.observe(o,{childList:!0});var c=new MutationObserver(n);return c.observe(t,{characterData:!0,attributes:!0,childList:!0,subtree:!0}),{containerObserver:d,targetObserver:c}}function A(t){var o=t.gwmDom,n=t.opts.css;o&&o.remove();var e=document.createElement("div");return"pointerEvents"in document.documentElement.style&&(n.pointerEvents="none",n.zIndex=0<parseInt(""+n.zIndex,10)?n.zIndex:"999999"),f(e,n),e}var D="canvas",M="element",N={position:"fixed",top:0,right:0,bottom:0,left:0,overflow:"hidden",zIndex:-10,backgroundRepeat:"no-repeat",display:"block",opacity:"1"};function v(){}return new(v.prototype.creation=function(t){t.css=Object.assign({},N,t.css),this.opts=t,this.cancel();var o=t.mode,n=t.watch,e=t.container,s=e===void 0?document.body:e;this.wrap=function(i){if(typeof i!="string")return i;var p=document.querySelector(i);return p||document.body}(s),this.wrap!==document.body&&(this.opts.css.position="absolute",f(this.wrap,{position:"relative"})),this.gwmDom=A(this);var r,h,d,c=new m(t),a=(h=c,d=[D,"svg",M],(r=o)&&(r=r.toLowerCase(),r=d.includes(r)?r:""),new((r=r||"svg")===D?g:r==="svg"?C:z)(h)).render();o===M?this.gwmDom.appendChild(a):this.gwmDom.style.background='url("'+a+'")';var l=this.wrap.firstChild;l?this.wrap.insertBefore(this.gwmDom,l):this.wrap.appendChild(this.gwmDom),n!==!1&&(this.observer=this.observing()),t.destroy&&(this.creation=function(i){return i})},v.prototype.observing=function(){var t=this;return L(this.gwmDom,this.wrap,function(){return t.creation(t.opts)})},v.prototype.cancel=function(){var t,o,n;this.observer&&(t=this.observer,o=t.containerObserver,n=t.targetObserver,o.disconnect(),n.disconnect())},v)})})(I);var $=I.exports;const J=H($),Q=u=>(q("data-v-2e717c8c"),u=u(),G(),u),X={class:"container"},Y=Q(()=>K("span",null,"hello nuanxin",-1)),Z=[Y],tt=P({__name:"index",setup(u){return J.creation({txt:"暖心专属",mode:"svg",watch:!0,fontSize:12,width:120,height:120,color:"#ccc",font:"pingfang",css:{"z-index":99999,"pointer-events":"none"},alpha:.6,angle:-15}),(k,m)=>(T(),U("div",X,Z))}}),nt=V(tt,[["__scopeId","data-v-2e717c8c"]]);export{nt as default};
